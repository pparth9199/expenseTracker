{"ast":null,"code":"var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.createAnimatedCallFunc=createAnimatedCallFunc;var _toConsumableArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _assertThisInitialized2=_interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _AnimatedNode2=_interopRequireWildcard(require(\"./AnimatedNode\"));var _AnimatedBlock=require(\"./AnimatedBlock\");var _val=require(\"../val\");var _invariant=_interopRequireDefault(require(\"fbjs/lib/invariant\"));function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var AnimatedCallFunc=function(_AnimatedNode){(0,_inherits2.default)(AnimatedCallFunc,_AnimatedNode);var _super=_createSuper(AnimatedCallFunc);function AnimatedCallFunc(what,args,params){var _this;(0,_classCallCheck2.default)(this,AnimatedCallFunc);(0,_invariant.default)(what instanceof _AnimatedNode2.default,\"Reanimated: AnimatedCallFunc 'what' argument should be of type AnimatedNode but got \".concat(what));(0,_invariant.default)(args.every(function(el){return el instanceof _AnimatedNode2.default;}),\"Reanimated: every AnimatedCallFunc 'args' argument should be of type AnimatedNode but got \".concat(args));(0,_invariant.default)(params.every(function(el){return el instanceof _AnimatedNode2.default;}),\"Reanimated: every AnimatedCallFunc 'params' argument should be of type AnimatedNode but got \".concat(params));_this=_super.call(this,{type:'callfunc',what:what,args:args,params:params},(0,_toConsumableArray2.default)(args));_defineProperty((0,_assertThisInitialized2.default)(_this),\"_previousCallID\",void 0);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_what\",void 0);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_args\",void 0);_defineProperty((0,_assertThisInitialized2.default)(_this),\"_params\",void 0);_this._what=what;_this._args=args;_this._params=params;return _this;}(0,_createClass2.default)(AnimatedCallFunc,[{key:\"toString\",value:function toString(){return\"AnimatedCallFunc, id: \".concat(this.__nodeID);}},{key:\"beginContext\",value:function beginContext(){var _this2=this;this._previousCallID=(0,_AnimatedNode2.getCallID)();(0,_AnimatedNode2.setCallID)((0,_AnimatedNode2.getCallID)()+'/'+this.__nodeID);this._params.forEach(function(param,index){param.beginContext(_this2._args[index],_this2._previousCallID);});}},{key:\"endContext\",value:function endContext(){this._params.forEach(function(param,index){param.endContext();});(0,_AnimatedNode2.setCallID)(this._previousCallID);}},{key:\"__onEvaluate\",value:function __onEvaluate(){this.beginContext();var value=(0,_val.val)(this._what);this.endContext();return value;}}]);return AnimatedCallFunc;}(_AnimatedNode2.default);function createAnimatedCallFunc(proc,args,params){return new AnimatedCallFunc(proc,args.map(function(p){return(0,_AnimatedBlock.adapt)(p);}),params);}","map":{"version":3,"sources":["AnimatedCallFunc.js"],"names":["constructor","invariant","what","args","el","params","type","setCallID","getCallID","param","value","val","p","adapt"],"mappings":"i8BAAA,sEACA,8CACA,2BACA,qE,44BAEA,CAAA,gB,0HAKEA,0BAAW,IAAXA,CAAW,IAAXA,CAAW,MAAXA,CAAgC,+DAC9BC,uBACEC,IAAI,WADG,uBAATD,CAAS,uFAAA,MAAA,CAATA,IAAS,CAATA,EAIAA,uBACEE,IAAI,CAAJA,KAAAA,CAAWC,SAAAA,EAAE,QAAIA,CAAAA,EAAE,WADZ,uBACM,EAAbD,CADFF,CAAS,6FAAA,MAAA,CAATA,IAAS,CAATA,EAIAA,uBACEI,MAAM,CAANA,KAAAA,CAAaD,SAAAA,EAAE,QAAIA,CAAAA,EAAE,WADd,uBACQ,EAAfC,CADFJ,CAAS,+FAAA,MAAA,CAATA,MAAS,CAATA,EAIA,uBACE,CACEK,IAAI,CADN,UAAA,CAEEJ,IAFF,CAEEA,IAFF,CAGEC,IAHF,CAGEA,IAHF,CAIEE,MAAAA,CAAAA,MAJF,CADF,iCAAA,IAAA,GAb8B,eAAA,4CAAA,iBAAA,CAAA,IAAA,EAAA,CAAA,CAAA,eAAA,4CAAA,OAAA,CAAA,IAAA,EAAA,CAAA,CAAA,eAAA,4CAAA,OAAA,CAAA,IAAA,EAAA,CAAA,CAAA,eAAA,4CAAA,SAAA,CAAA,IAAA,EAAA,CAAA,CAsB9B,MAAA,KAAA,CAAA,IAAA,CACA,MAAA,KAAA,CAAA,IAAA,CACA,MAAA,OAAA,CAAA,MAAA,CAxB8B,aAyB/B,C,qFAEU,CACT,MAAA,yBAAA,MAAA,CAAgC,KAAhC,QAAA,CAAA,CACD,C,mDAEc,iBACb,KAAA,eAAA,CAAA,8BAAA,CACAE,6BAAUC,+BAAAA,GAAAA,CAAoB,KAA9BD,QAAAA,EAEA,KAAA,OAAA,CAAA,OAAA,CAAqB,SAAA,KAAA,CAAA,KAAA,CAAkB,CACrCE,KAAK,CAALA,YAAAA,CAAmB,MAAA,CAAA,KAAA,CAAnBA,KAAmB,CAAnBA,CAAsC,MAAA,CAAtCA,eAAAA,EADF,CAAA,EAGD,C,+CAEY,CACX,KAAA,OAAA,CAAA,OAAA,CAAqB,SAAA,KAAA,CAAA,KAAA,CAAkB,CACrCA,KAAK,CAALA,UAAAA,GADF,CAAA,EAGAF,6BAAU,KAAVA,eAAAA,EACD,C,mDAEc,CACb,KAAA,YAAA,GACA,GAAMG,CAAAA,KAAK,CAAGC,aAAI,KAAlB,KAAcA,CAAd,CACA,KAAA,UAAA,GACA,MAAA,CAAA,KAAA,CACD,C,8BAzDH,sB,EA4DO,QAAA,CAAA,sBAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAoD,CACzD,MAAO,IAAA,CAAA,gBAAA,CAAA,IAAA,CAA2BR,IAAI,CAAJA,GAAAA,CAASS,SAAAA,CAAC,QAAIC,yBAAzC,CAAyCA,CAAJ,EAAVV,CAA3B,CAAP,MAAO,CAAP,CACD","sourcesContent":["import AnimatedNode, { getCallID, setCallID } from './AnimatedNode';\nimport { adapt } from './AnimatedBlock';\nimport { val } from '../val';\nimport invariant from 'fbjs/lib/invariant';\n\nclass AnimatedCallFunc extends AnimatedNode {\n  _previousCallID;\n  _what;\n  _args;\n  _params;\n  constructor(what, args, params) {\n    invariant(\n      what instanceof AnimatedNode,\n      `Reanimated: AnimatedCallFunc 'what' argument should be of type AnimatedNode but got ${what}`\n    );\n    invariant(\n      args.every(el => el instanceof AnimatedNode),\n      `Reanimated: every AnimatedCallFunc 'args' argument should be of type AnimatedNode but got ${args}`\n    );\n    invariant(\n      params.every(el => el instanceof AnimatedNode),\n      `Reanimated: every AnimatedCallFunc 'params' argument should be of type AnimatedNode but got ${params}`\n    );\n    super(\n      {\n        type: 'callfunc',\n        what,\n        args,\n        params,\n      },\n      [...args]\n    );\n    this._what = what;\n    this._args = args;\n    this._params = params;\n  }\n\n  toString() {\n    return `AnimatedCallFunc, id: ${this.__nodeID}`;\n  }\n\n  beginContext() {\n    this._previousCallID = getCallID();\n    setCallID(getCallID() + '/' + this.__nodeID);\n\n    this._params.forEach((param, index) => {\n      param.beginContext(this._args[index], this._previousCallID);\n    });\n  }\n\n  endContext() {\n    this._params.forEach((param, index) => {\n      param.endContext();\n    });\n    setCallID(this._previousCallID);\n  }\n\n  __onEvaluate() {\n    this.beginContext();\n    const value = val(this._what);\n    this.endContext();\n    return value;\n  }\n}\n\nexport function createAnimatedCallFunc(proc, args, params) {\n  return new AnimatedCallFunc(proc, args.map(p => adapt(p)), params);\n}\n"]},"metadata":{},"sourceType":"script"}