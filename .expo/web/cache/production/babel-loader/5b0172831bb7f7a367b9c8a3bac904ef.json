{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.createOrReuseStyleNode=createOrReuseStyleNode;exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _reactNative=require(\"react-native\");var _AnimatedNode2=_interopRequireDefault(require(\"./AnimatedNode\"));var _AnimatedTransform=require(\"./AnimatedTransform\");var _areEqual=_interopRequireDefault(require(\"fbjs/lib/areEqual\"));function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function sanitizeStyle(inputStyle){var style={};for(var key in inputStyle){var value=inputStyle[key];if(value instanceof _AnimatedNode2.default){style[key]=value.__nodeID;}}return style;}function createOrReuseStyleNode(style,oldNode){style=_reactNative.StyleSheet.flatten(style)||{};if(style.transform){style=_objectSpread(_objectSpread({},style),{},{transform:(0,_AnimatedTransform.createOrReuseTransformNode)(style.transform,oldNode&&oldNode._style.transform)});}var config=sanitizeStyle(style);if(oldNode&&(0,_areEqual.default)(config,oldNode._config)){return oldNode;}return new AnimatedStyle(style,config);}var AnimatedStyle=function(_AnimatedNode){(0,_inherits2.default)(AnimatedStyle,_AnimatedNode);var _super=_createSuper(AnimatedStyle);function AnimatedStyle(style,config){var _this;(0,_classCallCheck2.default)(this,AnimatedStyle);_this=_super.call(this,{type:'style',style:config},Object.values(style));_this._config=config;_this._style=style;return _this;}(0,_createClass2.default)(AnimatedStyle,[{key:\"toString\",value:function toString(){return\"AnimatedStyle, id: \".concat(this.__nodeID);}},{key:\"_walkStyleAndGetAnimatedValues\",value:function _walkStyleAndGetAnimatedValues(style){var updatedStyle={};for(var key in style){var value=style[key];if(value instanceof _AnimatedNode2.default){updatedStyle[key]=value.__getValue();}else if(value&&!Array.isArray(value)&&typeof value==='object'){updatedStyle[key]=this._walkStyleAndGetAnimatedValues(value);}}return updatedStyle;}},{key:\"__onEvaluate\",value:function __onEvaluate(){return this._walkStyleAndGetAnimatedValues(this._style);}}]);return AnimatedStyle;}(_AnimatedNode2.default);exports.default=AnimatedStyle;","map":{"version":3,"sources":["AnimatedStyle.js"],"names":["style","value","inputStyle","StyleSheet","transform","createOrReuseTransformNode","oldNode","config","sanitizeStyle","deepEqual","constructor","type","Object","updatedStyle","Array"],"mappings":"mrBAAA,yCAEA,qEACA,sDAEA,mE,qqDAEA,QAAA,CAAA,aAAA,CAAA,UAAA,CAAmC,CACjC,GAAMA,CAAAA,KAAK,CAAX,EAAA,CACA,IAAK,GAAL,CAAA,GAAA,GAAA,CAAA,UAAA,CAA8B,CAC5B,GAAMC,CAAAA,KAAK,CAAGC,UAAU,CAAxB,GAAwB,CAAxB,CACA,GAAID,KAAK,WAAT,uBAAA,CAAmC,CACjCD,KAAK,CAALA,GAAK,CAALA,CAAaC,KAAK,CAAlBD,QAAAA,CACD,CACF,CACD,MAAA,CAAA,KAAA,CACD,CAEM,QAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,OAAA,CAAgD,CACrDA,KAAK,CAAGG,wBAAAA,OAAAA,CAAAA,KAAAA,GAARH,EAAAA,CACA,GAAIA,KAAK,CAAT,SAAA,CAAqB,CACnBA,KAAK,CAAA,aAAA,CAAA,aAAA,CAAA,EAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA,CAEHI,SAAS,CAAEC,kDACTL,KAAK,CAD8B,SAA1BK,CAETC,OAAO,EAAIA,OAAO,CAAPA,MAAAA,CAFwB,SAA1BD,CAFR,CAAA,CAALL,CAOD,CACD,GAAMO,CAAAA,MAAM,CAAGC,aAAa,CAA5B,KAA4B,CAA5B,CACA,GAAIF,OAAO,EAAIG,sBAAS,MAATA,CAAkBH,OAAO,CAAxC,OAAeG,CAAf,CAAmD,CACjD,MAAA,CAAA,OAAA,CACD,CACD,MAAO,IAAA,CAAA,aAAA,CAAA,KAAA,CAAP,MAAO,CAAP,CACD,C,GAMc,CAAA,a,oHACbC,uBAAW,KAAXA,CAAW,MAAXA,CAA2B,4DACzB,uBAAM,CAAEC,IAAI,CAAN,OAAA,CAAiBX,KAAK,CAAEO,MAAxB,CAAN,CAAwCK,MAAM,CAANA,MAAAA,CAAxC,KAAwCA,CAAxC,EACA,MAAA,OAAA,CAAA,MAAA,CACA,MAAA,MAAA,CAAA,KAAA,CAHyB,aAI1B,C,kFAEU,CACT,MAAA,sBAAA,MAAA,CAA6B,KAA7B,QAAA,CAAA,CACD,C,sFAE6B,K,CAAQ,CACpC,GAAMC,CAAAA,YAAY,CAAlB,EAAA,CACA,IAAK,GAAL,CAAA,GAAA,GAAA,CAAA,KAAA,CAAyB,CACvB,GAAMZ,CAAAA,KAAK,CAAGD,KAAK,CAAnB,GAAmB,CAAnB,CACA,GAAIC,KAAK,WAAT,uBAAA,CAAmC,CACjCY,YAAY,CAAZA,GAAY,CAAZA,CAAoBZ,KAAK,CAAzBY,UAAoBZ,EAApBY,CADF,CAAA,IAEO,IAAIZ,KAAK,EAAI,CAACa,KAAK,CAALA,OAAAA,CAAVb,KAAUa,CAAVb,EAAkC,MAAA,CAAA,KAAA,GAAtC,QAAA,CAAiE,CAEtEY,YAAY,CAAZA,GAAY,CAAZA,CAAoB,KAAA,8BAAA,CAApBA,KAAoB,CAApBA,CACD,CACF,CACD,MAAA,CAAA,YAAA,CACD,C,mDAEc,CACb,MAAO,MAAA,8BAAA,CAAoC,KAA3C,MAAO,CAAP,CACD,C,2BA3BY,sB","sourcesContent":["import { StyleSheet } from 'react-native';\n\nimport AnimatedNode from './AnimatedNode';\nimport { createOrReuseTransformNode } from './AnimatedTransform';\n\nimport deepEqual from 'fbjs/lib/areEqual';\n\nfunction sanitizeStyle(inputStyle) {\n  const style = {};\n  for (const key in inputStyle) {\n    const value = inputStyle[key];\n    if (value instanceof AnimatedNode) {\n      style[key] = value.__nodeID;\n    }\n  }\n  return style;\n}\n\nexport function createOrReuseStyleNode(style, oldNode) {\n  style = StyleSheet.flatten(style) || {};\n  if (style.transform) {\n    style = {\n      ...style,\n      transform: createOrReuseTransformNode(\n        style.transform,\n        oldNode && oldNode._style.transform\n      ),\n    };\n  }\n  const config = sanitizeStyle(style);\n  if (oldNode && deepEqual(config, oldNode._config)) {\n    return oldNode;\n  }\n  return new AnimatedStyle(style, config);\n}\n\n/**\n * AnimatedStyle should never be directly instantiated, use createOrReuseStyleNode\n * in order to make a new instance of this node.\n */\nexport default class AnimatedStyle extends AnimatedNode {\n  constructor(style, config) {\n    super({ type: 'style', style: config }, Object.values(style));\n    this._config = config;\n    this._style = style;\n  }\n\n  toString() {\n    return `AnimatedStyle, id: ${this.__nodeID}`;\n  }\n\n  _walkStyleAndGetAnimatedValues(style) {\n    const updatedStyle = {};\n    for (const key in style) {\n      const value = style[key];\n      if (value instanceof AnimatedNode) {\n        updatedStyle[key] = value.__getValue();\n      } else if (value && !Array.isArray(value) && typeof value === 'object') {\n        // Support animating nested values (for example: shadowOffset.height)\n        updatedStyle[key] = this._walkStyleAndGetAnimatedValues(value);\n      }\n    }\n    return updatedStyle;\n  }\n\n  __onEvaluate() {\n    return this._walkStyleAndGetAnimatedValues(this._style);\n  }\n}\n"]},"metadata":{},"sourceType":"script"}